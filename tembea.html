<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Local Tourism Marketplace — Demo</title>
  <style>
    :root{--accent:#0ea5a4;--muted:#6b7280}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:#f8fafc;color:#0f172a}
    header{background:linear-gradient(90deg,var(--accent),#06b6d4);color:white;padding:28px 20px}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px}
    .card{background:white;border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
    .attraction{display:flex;gap:12px;align-items:flex-start}
    .thumb{width:120px;height:84px;border-radius:8px;flex:0 0 120px;background:#e6eef0;display:flex;align-items:center;justify-content:center;color:var(--muted)}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .pill{display:inline-block;background:#eef7f7;color:#064e4e;padding:6px 8px;border-radius:999px;font-size:12px}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #e6edf0}
    .list{display:flex;flex-direction:column;gap:12px}
    .small{font-size:13px}
    footer{padding:20px;text-align:center;color:var(--muted)}
    @media(max-width:900px){.grid{grid-template-columns:1fr} .thumb{width:96px;height:72px}}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1 style="margin:0;font-size:22px">Local Tourism Marketplace</h1>
      <p class="muted" style="margin:6px 0 0;">Demo site — list attractions, transport (matatu saccos), lodgings, and take bookings. Designed to deploy to GitHub Pages.</p>
    </div>
  </header>  <main class="container" style="margin-top:18px">
    <div class="grid">
      <section>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div>
              <strong>Explore attractions</strong>
              <div class="muted small">Filter, search and book local trips</div>
            </div>
            <div>
              <input id="q" placeholder="Search (e.g., Amboseli)" style="width:220px" />
            </div>
          </div><div style="display:flex;gap:10px;margin-bottom:12px">
        <select id="region"><option value="">All regions</option><option value="Kajiado">Kajiado</option><option value="Nairobi">Nairobi</option><option value="Narok">Narok</option></select>
        <select id="type"><option value="">Any type</option><option value="Park">Park</option><option value="Cultural">Cultural</option><option value="Lodge">Lodge</option></select>
        <button class="btn" id="filterBtn">Filter</button>
      </div>

      <div id="listings" class="list"></div>
    </div>

    <div class="card" style="margin-top:14px">
      <strong>Quick actions</strong>
      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="pill" id="seedBtn">Load sample listings</button>
        <button id="exportJSON" class="pill">Export listings JSON</button>
        <button id="clearStorage" class="pill">Clear local data</button>
      </div>
      <div class="muted small" style="margin-top:8px">This demo saves data in your browser (LocalStorage). For production, connect to a backend and MPESA API.</div>
    </div>
  </section>

  <aside>
    <div class="card">
      <strong>Create listing</strong>
      <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
        <input id="title" placeholder="Attraction title" />
        <input id="regionInput" placeholder="Region (e.g., Kajiado)" />
        <input id="price" placeholder="Starting price Ksh" />
        <select id="sacco"><option value="S.Ndiunga Sacco">S.Ndiunga Sacco (matatu)</option><option value="Kajiado Connect">Kajiado Connect</option><option value="Rift Riders">Rift Riders</option></select>
        <textarea id="desc" placeholder="Short description" rows="3"></textarea>
        <button id="addListing" class="btn">Add listing</button>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <strong>Bookings</strong>
      <div id="bookingsList" class="muted small" style="margin-top:8px">No bookings yet</div>
    </div>

    <div class="card" style="margin-top:12px">
      <strong>Map & Info</strong>
      <div style="margin-top:8px" class="muted small">Map iframe (static demo). Replace with Google Maps or Leaflet for production.</div>
      <iframe src="https://www.openstreetmap.org/export/embed.html?bbox=36.5%2C-2.0%2C37.5%2C-1.0&amp;layer=mapnik" style="width:100%;height:160px;border:0;margin-top:8px;border-radius:8px"></iframe>
    </div>
  </aside>
</div>

  </main>  <footer>
    <div class="container muted small">Made with ❤️ — Demo marketplace. Deploy to GitHub Pages by pushing this file as <code>index.html</code> to a repository named <code>yourname.github.io</code>.</div>
  </footer>  <!-- Booking modal (simple) -->  <div id="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.48);padding:18px">
    <div style="width:480px;max-width:96%;background:white;padding:16px;border-radius:12px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong id="modalTitle">Book trip</strong>
        <button id="closeModal" class="muted">✕</button>
      </div>
      <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
        <input id="bkName" placeholder="Your name" />
        <input id="bkPhone" placeholder="Phone (07..)"> 
        <input id="bkSeats" placeholder="Seats" type="number" min="1" value="1" />
        <div style="display:flex;gap:8px;align-items:center">
          <button id="payMpesa" class="btn">Simulate MPESA pay</button>
          <div class="muted small">Payment simulation: marks booking as paid locally.</div>
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:6px">
          <button id="saveBooking" class="btn">Confirm booking</button>
        </div>
      </div>
    </div>
  </div>  <script>
    /* Basic demo logic: sample listings, render, localStorage persistence, bookings */
    const LS_KEY = 'tm_listings_v1';
    const BK_KEY = 'tm_bookings_v1';

    function uid(){return Date.now().toString(36)+Math.random().toString(36).slice(2,7)}

    function saveListings(list){localStorage.setItem(LS_KEY,JSON.stringify(list))}
    function loadListings(){try{return JSON.parse(localStorage.getItem(LS_KEY))||[]}catch(e){return []}}
    function saveBookings(b){localStorage.setItem(BK_KEY,JSON.stringify(b))}
    function loadBookings(){try{return JSON.parse(localStorage.getItem(BK_KEY))||[]}catch(e){return []}}

    function sampleData(){return [
      {id:uid(),title:'Ololo Safari Park',region:'Kajiado',type:'Park',price:1200,sacco:'S.Ndiunga Sacco',desc:'Family-friendly park with picnic spots and wildlife viewing.'},
      {id:uid(),title:'Masai Cultural Village - Enkare',region:'Kajiado',type:'Cultural',price:800,sacco:'Kajiado Connect',desc:'Experience Maasai dance, crafts and guided village tour.'},
      {id:uid(),title:'Rift Valley Lookout (Narok)',region:'Narok',type:'Park',price:1500,sacco:'Rift Riders',desc:'Scenic viewpoint with short hiking trails.'},
      {id:uid(),title:'Ngong Hills Day Trip',region:'Nairobi',type:'Park',price:1000,sacco:'Kajiado Connect',desc:'Hiking and paragliding viewing points.'}
    ]}

    // Render listings
    function renderList(list){const el=document.getElementById('listings');el.innerHTML='';if(!list.length){el.innerHTML='<div class="muted">No listings. Load sample data or create one.</div>';return}
      list.forEach(it=>{
        const div=document.createElement('div');div.className='card';div.style.padding='10px';div.innerHTML=`
          <div class="attraction">
            <div class="thumb">IMG</div>
            <div style="flex:1">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                  <strong>${it.title}</strong>
                  <div class="muted small">${it.region} · ${it.type} · <span class="pill">${it.sacco}</span></div>
                </div>
                <div style="text-align:right">
                  <div style="font-weight:700">Ksh ${it.price}</div>
                  <div style="margin-top:8px"><button class="btn" data-id="${it.id}">Book</button></div>
                </div>
              </div>
              <div class="muted small" style="margin-top:8px">${it.desc}</div>
            </div>
          </div>
        `;el.appendChild(div);
      })
    }

    // Bind book buttons
    document.addEventListener('click',e=>{
      if(e.target.matches('.btn[data-id]')){
        openBooking(e.target.getAttribute('data-id'))
      }
    })

    // Add listing
    document.getElementById('addListing').addEventListener('click',()=>{
      const t=document.getElementById('title').value.trim();
      if(!t)return alert('Add title')
      const list=loadListings();list.unshift({id:uid(),title:t,region:document.getElementById('regionInput').value||'Kajiado',type:'Lodge',price:parseInt(document.getElementById('price').value)||500,sacco:document.getElementById('sacco').value,desc:document.getElementById('desc').value||''});
      saveListings(list);renderList(list);
      document.getElementById('title').value='';document.getElementById('desc').value='';
    })

    // Seed
    document.getElementById('seedBtn').addEventListener('click',()=>{saveListings(sampleData());renderList(loadListings())})

    // Export JSON
    document.getElementById('exportJSON').addEventListener('click',()=>{
      const data=JSON.stringify(loadListings(),null,2);
      const blob=new Blob([data],{type:'application/json'});
      const url=URL.createObjectURL(blob);
      const a=document.createElement('a');a.href=url;a.download='listings.json';a.click();
      URL.revokeObjectURL(url);
    })

    // Clear
    document.getElementById('clearStorage').addEventListener('click',()=>{if(confirm('Clear local stored listings and bookings?')){localStorage.removeItem(LS_KEY);localStorage.removeItem(BK_KEY);renderList([]);renderBookings();alert('Cleared')}})

    // Filter/search
    document.getElementById('filterBtn').addEventListener('click',()=>{
      const q=document.getElementById('q').value.toLowerCase();const region=document.getElementById('region').value;const type=document.getElementById('type').value;
      let list=loadListings();if(q)list=list.filter(x=>x.title.toLowerCase().includes(q)||x.desc.toLowerCase().includes(q));if(region)list=list.filter(x=>x.region===region);if(type)list=list.filter(x=>x.type===type);
      renderList(list);
    })

    // Booking modal
    let activeListing=null;function openBooking(id){activeListing=loadListings().find(x=>x.id===id);document.getElementById('modalTitle').textContent='Book: '+activeListing.title;document.getElementById('modal').style.display='flex'}
    document.getElementById('closeModal').addEventListener('click',()=>document.getElementById('modal').style.display='none')

    // Simulate MPESA
    let lastMpesaPaid=false;
    document.getElementById('payMpesa').addEventListener('click',()=>{lastMpesaPaid=true;alert('Simulated MPESA: payment marked as successful (demo)')})

    // Save booking
    document.getElementById('saveBooking').addEventListener('click',()=>{
      const name=document.getElementById('bkName').value.trim();const phone=document.getElementById('bkPhone').value.trim();const seats=parseInt(document.getElementById('bkSeats').value)||1;
      if(!name||!phone) return alert('Enter name & phone');
      const bks=loadBookings();bks.unshift({id:uid(),listingId:activeListing.id,listingTitle:activeListing.title,name,phone,seats,paid:lastMpesaPaid,date:new Date().toISOString()});
      saveBookings(bks);renderBookings();document.getElementById('modal').style.display='none';lastMpesaPaid=false;alert('Booking saved locally. In production send to server & confirm MPESA transaction.')
    })

    function renderBookings(){const b=loadBookings();const el=document.getElementById('bookingsList');if(!b.length){el.textContent='No bookings yet';return}
      el.innerHTML='';b.forEach(it=>{const d=document.createElement('div');d.style.marginBottom='8px';d.innerHTML=`<div><strong>${it.name}</strong> — ${it.listingTitle} <div class="muted small">${new Date(it.date).toLocaleString()} · Seats: ${it.seats} · ${it.paid?'<span style="color:green">Paid</span>':'<span style="color:orangered">Pending</span>'}</div></div>`;el.appendChild(d)})
    }

    // init
    if(!localStorage.getItem(LS_KEY)){saveListings(sampleData())}
    renderList(loadListings());renderBookings();
  </script></body>
  </html>
